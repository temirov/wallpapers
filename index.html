<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grey Wallpaper Generator</title>
    <meta name="description"
          content="Generate tone perfect grey or Gaussian noise grey wallpapers with our tool. Perfect for minimalist design, testing displays, and reducing eye strain.">
    <meta name="keywords"
          content="grey wallpaper, tone perfect grey, gaussian noise grey, wallpaper generator, minimalism">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Tone Perfect Grey &amp; Gaussian Noise Grey Wallpaper Generator">
    <meta property="og:description"
          content="Generate tone perfect grey or Gaussian noise grey wallpapers with our tool. Perfect for minimalist design, testing displays, and reducing eye strain.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wallpapers.mprlab.com">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Tone Perfect Grey &amp; Gaussian Noise Grey Wallpaper Generator">
    <meta name="twitter:description"
          content="Generate tone perfect grey or Gaussian noise grey wallpapers with our tool. Perfect for minimalist design, testing displays, and reducing eye strain.">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebPage",
            "name": "Tone Perfect Grey & Gaussian Noise Grey Wallpaper Generator",
            "description": "Generate tone perfect grey or Gaussian noise grey wallpapers with our tool. Perfect for minimalist design, testing displays, and reducing eye strain.",
            "url": "https://wallpapers.mprlab.com"
        }
    </script>

    <!-- Latest Bootstrap CSS (v5.3.0) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        canvas {
            border: 1px solid #ccc;
            width: 100%;
            height: auto;
        }
        .card {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<div class="container my-4">
    <h1 class="mb-4 text-center">Grey Wallpaper Generator</h1>
    <div class="row">
        <!-- Tone Perfect Grey Card -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header text-center">Tone Perfect Grey</div>
                <div class="card-body">
                    <canvas id="previewSolid"></canvas>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <button id="downloadSolid" class="btn btn-primary">Download Full Resolution</button>
                        <span class="text-muted small" id="resolutionTextSolid"></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Gaussian Noise Grey Card -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header text-center">Gaussian Noise Grey</div>
                <div class="card-body">
                    <canvas id="previewNoise"></canvas>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <button id="downloadNoise" class="btn btn-primary">Download Full Resolution</button>
                        <span class="text-muted small" id="resolutionTextNoise"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center">
        <button id="regeneratePreviews" class="btn btn-secondary mt-3">Regenerate Previews</button>
    </div>
</div>

<!-- Bootstrap Bundle with Popper (v5.3.0) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Detect full (physical) resolution using devicePixelRatio.
    const devicePixelRatioValue = window.devicePixelRatio || 1;
    const fullWidth = Math.round(screen.width * devicePixelRatioValue);
    const fullHeight = Math.round(screen.height * devicePixelRatioValue);

    // Set the resolution text for each card.
    document.getElementById('resolutionTextSolid').textContent = fullWidth + " x " + fullHeight;
    document.getElementById('resolutionTextNoise').textContent = fullWidth + " x " + fullHeight;

    // For thumbnail previews, we use a fixed width (e.g., 300px) and scale height proportionally.
    const previewWidth = 300;
    const previewHeight = Math.round(300 * fullHeight / fullWidth);

    // Generate an image into a given canvas with specified width, height and mode.
    // mode: "solid" for tone perfect grey, "noise" for Gaussian noise grey.
    function generateImage(canvas, width, height, mode) {
        canvas.width = width;
        canvas.height = height;
        const context = canvas.getContext('2d');
        const imageData = context.createImageData(width, height);
        const data = imageData.data;

        for (let y = 0; y < height; y++) {
            for (let x = 0; x < width; x++) {
                const idx = (y * width + x) * 4;
                let greyValue = 128; // tone perfect grey
                if (mode === "noise") {
                    greyValue = gaussianRandom(128, 20);
                }
                data[idx]     = greyValue;
                data[idx + 1] = greyValue;
                data[idx + 2] = greyValue;
                data[idx + 3] = 255;
            }
        }
        context.putImageData(imageData, 0, 0);
    }

    // Gaussian random generator using the Box-Muller transform.
    function gaussianRandom(mean, stdDev) {
        let u1 = Math.random();
        let u2 = Math.random();
        const standardNormal = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
        let value = mean + stdDev * standardNormal;
        return Math.round(Math.max(0, Math.min(255, value)));
    }

    // Regenerate both thumbnail previews.
    function regeneratePreviews() {
        const previewSolid = document.getElementById('previewSolid');
        const previewNoise = document.getElementById('previewNoise');
        generateImage(previewSolid, previewWidth, previewHeight, 'solid');
        generateImage(previewNoise, previewWidth, previewHeight, 'noise');
    }

    // Generate full resolution wallpaper and trigger its download.
    function downloadFullResolution(mode) {
        const offscreenCanvas = document.createElement('canvas');
        generateImage(offscreenCanvas, fullWidth, fullHeight, mode);
        const imageURL = offscreenCanvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.href = imageURL;
        link.download = mode === 'solid' ? 'tone-perfect-grey.png' : 'gaussian-noise-grey.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    document.getElementById('regeneratePreviews').addEventListener('click', regeneratePreviews);
    document.getElementById('downloadSolid').addEventListener('click', () => {
        downloadFullResolution('solid');
    });
    document.getElementById('downloadNoise').addEventListener('click', () => {
        downloadFullResolution('noise');
    });

    // Generate previews on page load.
    regeneratePreviews();
</script>
</body>
</html>
